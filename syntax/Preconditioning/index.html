<!DOCTYPE html><head><meta charset="UTF-8"><title>Preconditioning System | RACCOON</title><link rel="icon" type="image/x-icon" href="../../media/raccoon_icon.png" sizes="16x16 32x32 64x64 128x128"></link><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="https://hugary1995.github.io/raccoon/index.html" class="left moose-logo hide-on-med-and-down">RACCOON</a><a href="https://github.com/hugary1995/raccoon" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="../../install/index.html">Install</a></li><li><a href="../../theory/index.html">Theory</a></li><li><a href="../../modules/index.html">Modules</a></li><li><a href="../index.html">Syntax</a></li><li><a href="../../contribute/index.html">Contribute</a></li></ul><a href="#" class="sidenav-trigger" data-target="1eda5de6-5510-4435-b0a8-f46b289ca9b1"><i class="material-icons">menu</i></a><ul class="sidenav" id="1eda5de6-5510-4435-b0a8-f46b289ca9b1"><li><a href="../../install/index.html">Install</a></li><li><a href="../../theory/index.html">Theory</a></li><li><a href="../../modules/index.html">Modules</a></li><li><a href="../index.html">Syntax</a></li><li><a href="../../contribute/index.html">Contribute</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="https://hugary1995.github.io/raccoon/index.html" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">syntax</a><a href="." class="breadcrumb">Preconditioning</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="688b6c8b-3769-4a82-995c-91dcb48369e8" data-section-level="1" data-section-text="Preconditioning System"><h1 id="preconditioning-system">Preconditioning System</h1><section class="scrollspy" id="10e5e8c3-0a6d-4dbf-869c-04f225d9060c" data-section-level="2" data-section-text="Overview"><h2 id="overview">Overview</h2><p>See <a href="../../source/executioners/Steady.html">Steady</a> for more details on how preconditioning is used in solving nonlinear systems in MOOSE. The <code>Preconditioning</code> block allows you to define which type of preconditioning matrix to build and what process to apply. You can define multiple blocks with different names, allowing you to quickly switch out preconditioning options. Within the sub-blocks you can also provide other options specific to that type of preconditioning matrix. You can also override PETSc options here. Only one block can be active at a time.</p></section><section class="scrollspy" id="486fea8c-0f78-429f-a7a6-fe925f0b6305" data-section-level="2" data-section-text="Default Preconditioning Matrix"><h2 id="default-preconditioning-matrix">Default Preconditioning Matrix</h2><p>Consider the fully coupled system of equations:</p><span class="moose-katex-block-equation"><span class="moose-katex-equation table-cell" id="moose-equation-9c53a955-8271-4cfb-91ee-764c855b68f7"></span><script>var element = document.getElementById("moose-equation-9c53a955-8271-4cfb-91ee-764c855b68f7");katex.render("\\begin{aligned} \\nabla \\cdot k(s,T) \\nabla T  &= 0 \\\\ \\nabla \\cdot D(s,T) \\nabla s  &= 0 , \\end{aligned},", element, {displayMode:true,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\diff":"\\text{ d}#1","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"{\\mathcal{G}_c}","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>","\\body":"\\Omega","\\bodyboundary":"{\\partial\\body}","\\grad":"\\bs{\\nabla}"}});</script></span><p>the fully coupled Jacobian is then approximated using a block-diagonal approach:</p><span class="moose-katex-block-equation"><span class="moose-katex-equation table-cell" id="moose-equation-c1748b6d-a3c9-4bc4-b912-e0e5423ffbf2"></span><script>var element = document.getElementById("moose-equation-c1748b6d-a3c9-4bc4-b912-e0e5423ffbf2");katex.render("\\boldsymbol{R}'(s,T) =  \\begin{bmatrix}    (\\boldsymbol{R}_T)_T & (\\boldsymbol{R}_T)_s    \\\\    (\\boldsymbol{R}_s)_T & (\\boldsymbol{R}_s)_s  \\end{bmatrix}  \\approx  \\begin{bmatrix}    (\\boldsymbol{R}_T)_T & \\boldsymbol{0}    \\\\    \\boldsymbol{0}       & (\\boldsymbol{R}_s)_s  \\end{bmatrix} .", element, {displayMode:true,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\diff":"\\text{ d}#1","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"{\\mathcal{G}_c}","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>","\\body":"\\Omega","\\bodyboundary":"{\\partial\\body}","\\grad":"\\bs{\\nabla}"}});</script></span><p>Thus, for this example, the default preconditioning matrix is defined as:</p><span class="moose-katex-block-equation"><span class="moose-katex-equation table-cell" id="moose-equation-42a92ffe-3686-46ce-83fd-8e430d21ba19"></span><script>var element = document.getElementById("moose-equation-42a92ffe-3686-46ce-83fd-8e430d21ba19");katex.render("\\boldsymbol{M} \\equiv     \\begin{bmatrix}       (k(s,T) \\nabla \\phi_j, \\nabla \\psi_i) & \\boldsymbol{0} \\\\       \\boldsymbol{0} & (D(s,T) \\nabla \\phi_j, \\nabla\\psi_i)     \\end{bmatrix} \\approx \\boldsymbol{R}'(s,T) .", element, {displayMode:true,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\diff":"\\text{ d}#1","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"{\\mathcal{G}_c}","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>","\\body":"\\Omega","\\bodyboundary":"{\\partial\\body}","\\grad":"\\bs{\\nabla}"}});</script></span></section><section class="scrollspy" id="db10111b-2d47-4a57-b0fa-3c201f1ee212" data-section-level="2" data-section-text="Example Input File Syntax"><h2 id="example-input-file-syntax">Example Input File Syntax</h2><pre class="moose-pre" style="max-height:350px;"><code class="language-None">[Preconditioning]
  active = &#x27;my_prec&#x27;

  [my_prec]
    type = SMP
    # SMP Options Go Here!
    # Override PETSc Options Here!
  []

  [other_prec]
    type = PBP
    # PBP Options Go Here!
    # Override PETSc Options Here!
  []
[]
</code></pre></section><section class="scrollspy" id="8149010e-1a12-42a8-b6d0-8cfcec7a92bb" data-section-level="2" data-section-text="Available Objects"><h2 id="available-objects">Available Objects</h2><ul class="moose-syntax-list collection with-header"><li class="collection-header">Moose App</li><li class="collection-item"><a href="../../source/splits/Split.html">Split</a>Field split based preconditioner for nonlinear solver.</li><li class="collection-item"><a href="../../source/preconditioners/FiniteDifferencePreconditioner.html">FDP</a>Finite difference preconditioner (FDP) builds a numerical Jacobian for preconditioning, only use for testing and verification.</li><li class="collection-item"><a href="../../source/preconditioners/FieldSplitPreconditioner.html">FSP</a>Preconditioner designed to map onto PETSc&#x27;s PCFieldSplit.</li><li class="collection-item"><a href="../../source/preconditioners/PhysicsBasedPreconditioner.html">PBP</a>Physics-based preconditioner (PBP) allows individual physics to have their own preconditioner.</li><li class="collection-item"><a href="../../source/preconditioners/SingleMatrixPreconditioner.html">SMP</a>Single matrix preconditioner (SMP) builds a preconditioner using user defined off-diagonal parts of the Jacobian.</li></ul></section><section class="scrollspy" id="63232de9-aa1d-4296-a88c-4acc1efb786f" data-section-level="2" data-section-text="Available Actions"><h2 id="available-actions">Available Actions</h2><ul class="moose-syntax-list collection with-header"><li class="collection-header">Moose App</li><li class="collection-item"><a href="../../source/actions/SetupPreconditionerAction.html">SetupPreconditionerAction</a>Add a Preconditioner object to the simulation.</li><li class="collection-item"><a href="../../source/actions/AddFieldSplitAction.html">AddFieldSplitAction</a>Add a Split object to the simulation.</li></ul></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#10e5e8c3-0a6d-4dbf-869c-04f225d9060c" class="tooltipped" data-position="left" data-tooltip="Overview">Overview</a></li><li><a href="#486fea8c-0f78-429f-a7a6-fe925f0b6305" class="tooltipped" data-position="left" data-tooltip="Default Preconditioning Matrix">Default Preconditioning Matrix</a></li><li><a href="#db10111b-2d47-4a57-b0fa-3c201f1ee212" class="tooltipped" data-position="left" data-tooltip="Example Input File Syntax">Example Input File Syntax</a></li><li><a href="#8149010e-1a12-42a8-b6d0-8cfcec7a92bb" class="tooltipped" data-position="left" data-tooltip="Available Objects">Available Objects</a></li><li><a href="#63232de9-aa1d-4296-a88c-4acc1efb786f" class="tooltipped" data-position="left" data-tooltip="Available Actions">Available Actions</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>